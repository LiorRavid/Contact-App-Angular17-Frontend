<div class="form-container">
    <mat-card class="contact-card">
        <mat-card-header>
            <mat-card-title>{{ isEditMode() ? 'Edit Contact' : 'Add New Contact' }}</mat-card-title>
            <mat-card-subtitle>Enter the contact's details below</mat-card-subtitle>
        </mat-card-header>

        <mat-card-content>
            <form [formGroup]="contactForm" (ngSubmit)="onSubmit()" class="contact-form">
                <div class="form-row">
                    <app-basic-input label="First Name" formControlName="firstName" placeholder="e.g. John"
                        [errorMessages]="ERROR_MESSAGES['firstName']">
                    </app-basic-input>

                    <app-basic-input label="Last Name" formControlName="lastName" placeholder="e.g. Doe"
                        [errorMessages]="ERROR_MESSAGES['lastName']">
                    </app-basic-input>
                </div>

                <app-basic-input label="Email Address" formControlName="email" type="email"
                    placeholder="e.g. john.doe@example.com" icon="email" [errorMessages]="ERROR_MESSAGES['email']">
                </app-basic-input>

                <div class="form-row">
                    <app-basic-input label="Phone Number" formControlName="phone"
                        placeholder="e.g. 021234567 or 031234567" icon="phone" [maxLength]="10"
                        [errorMessages]="ERROR_MESSAGES['phone']">
                    </app-basic-input>

                    <app-basic-input label="Mobile (Cell)" formControlName="cell" placeholder="e.g. 0541234567"
                        icon="smartphone" [maxLength]="10" [errorMessages]="ERROR_MESSAGES['cell']">
                    </app-basic-input>
                </div>

                <app-image-upload formControlName="picture" [firstName]="contactForm.value.firstName"
                    [lastName]="contactForm.value.lastName">
                </app-image-upload>

                <app-basic-input label="Avatar Image URL" formControlName="picture"
                    placeholder="https://example.com/photo.jpg" icon="image" hint="Paste a URL or upload a file above">
                </app-basic-input>

                <div class="actions">
                    <button mat-button type="button" (click)="onCancel()" [disabled]="isSubmitting()">Cancel</button>
                    <button mat-flat-button color="primary" type="submit"
                        [disabled]="contactForm.invalid || isSubmitting()">
                        @if (isSubmitting()) {
                        <mat-icon class="spinning">sync</mat-icon>
                        } @else {
                        <mat-icon>{{ isEditMode() ? 'save' : 'person_add' }}</mat-icon>
                        }
                        {{ isEditMode() ? 'Update Contact' : 'Create Contact' }}
                    </button>
                </div>
            </form>
        </mat-card-content>
    </mat-card>
</div>